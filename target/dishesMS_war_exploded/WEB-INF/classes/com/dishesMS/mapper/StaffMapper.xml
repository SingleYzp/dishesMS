<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dishesMS.dao.IStaffDAO">
    <resultMap id="staffResultMap" type="com.dishesMS.model.Staff">
        <id property="id" column="id"/>
        <result property="account" column="account" />
        <result property="password" column="password" />
        <result property="name" column="name" />
        <result property="gender" column="gender" />
        <result property="idCard" column="idCard" />
        <result property="tel" column="tel" />
        <result property="email" column="email" />
        <association property="role" column="role_id"
                     select="com.dishesMS.dao.IRoleDAO.selectRoleById"
                     javaType="com.dishesMS.model.Role" />
    </resultMap>

    <insert id="insertStaff" parameterType="com.dishesMS.model.Staff" useGeneratedKeys="true" keyProperty="id">
        insert into staff(account,password,name,gender,idCard,tel,email,role_id)
        VALUES (#{account},#{password},#{name},#{gender},#{idCard},#{tel},#{email},#{role.id})
    </insert>

    <select id="selectAll" resultMap="staffResultMap">
        SELECT * FROM staff
    </select>
</mapper>